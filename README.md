# SNMPSIM Tools

This repository contains scripts that can be used to interact with snmpsim simulations

## QA Device Simulator to SNMPSIM

### About

SNMPSIM is open source command line tool (running on Python) that can be used to simulate SNMP agents. Detailed information about how to use this tool can be found in the [official site](hhttps://docs.lextudio.com/snmpsim/).
This script converts a simulator took from the QA Device Simulator (XML file) to a simulation that can be parsed by snmpsim (snmprec file). A snmprec file is a plain text that is used by snmpsim to simulate an SNMP agent.

### How to use

For example, if you would like to convert the simulation **qaDeviceSimulation.xml** to the file **convertedSimulation.snmprec**, please proceed as follows:

```bash

qa_device_simulator_to_snmpsim.py --input="C:\MyDirectory\qaDeviceSimulation.xml" --output="C:\MyDirectory\convertedSimulation.snmprec"
```

The generated file (in this case, **convertedSimulation.snmprec**) does not need be created before the script is executed. The script will create the file in case it does not exist. If the file already exists, it will be overwritten

>[!NOTE]
> The script will generate a temporary file to deal with possible invalid characters available in the simulation file generated by the QA Device simulator. This temporary file will have the same name as the original file, except with an additonal suffix *_updated*

### Additional notes

- Some XML files generated by the QA Device Simulator contains invalid characters. For example:

```xml
<Definition OID="1.3.6.1.2.1.2.2.1.6.501" Type="OctetString" ReturnValue="&#x0;&#x0;&#x0;&#x0;&#x0;&#x14;" LogOutput="{INS}OID{INS} - {INS}ReturnValue{INS} ({INS}Type{INS})" Comment="" Delay="false" Save="false" SkipOID="false" />
```

In this case *&#x0* represents char(0) which is not valid in an XML document. This could be a consequence of a decoding issue (the QA Device simulator is decoding incorrectly a value retrieved by the device)
To surpass this constraint, this tool creates a temporary XML file containing the same information as the original XML file without the invalid characters.

## SNMP walk to SNMPSIM

This script will convert a SNMP walk (took by Net-SNMP tools) to a snmprec format (used by SNMPSIM)

## SNMPSIM Execute Single Simulation

The purpose of this bash script is to reduce the number of argument that are required to execute SNMPSIM to simulate a single SNMP agent.

### Arguments

- f|snmprecFolder: The folder that contains the simulation file (full path)
- i|ipAddress: The IP address of the simulated SNMP agent
- p|Port: The port of the simulated SNMP agent

### How to use

```bash
snmpsimExecuteSingleSimulation.sh --snmprecFolder /home/myUser/mySnmprecFolder --ipAddress 10.11.12.13 --port 10161
snmpsimExecuteSingleSimulation.sh -f /home/myUser/mySnmprecFolder -i 10.11.12.13 -p 10161
```

>[!IMPORTANT]
> - Currently `snmpsim-command-responder-lite` is hard-coded in the bash script. This command is recommended for SNMPv2 simulations. For SNMPv3 simulations, it is better to use `snmpsim-command-responder`
> - It is recommended to install the necessary libraries in a virtual environment
